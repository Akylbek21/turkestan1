<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–ú–∞–≤–∑–æ–ª–µ–π –•–æ–¥–∂–∏ –ê—Ö–º–µ–¥–∞ –Ø—Å—Å–∞—É–∏ ‚Äî Turkestan Guide</title>
<link rel="stylesheet" href="../css/main.css"/>
</head>
<body>
<header>
  <div class="container" style="display:flex;gap:10px;align-items:center">
    <a href="../index.html" class="badge" style="text-decoration:none">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <h1 id="title">–ú–∞–≤–∑–æ–ª–µ–π –•–æ–¥–∂–∏ –ê—Ö–º–µ–¥–∞ –Ø—Å—Å–∞—É–∏</h1>
  </div>
</header>

<img class="place-hero" alt="">
<main class="main">
  <div class="loc" id="loc"></div>
  <p class="lead" id="lead"></p>

  <div class="actions">
    <button class="btn primary" id="mark" type="button">–ë—ã–ª –∑–¥–µ—Å—å</button>
    <a class="btn" id="map" target="_blank" rel="noopener">–û—Ç–∫—Ä—ã—Ç—å –≤ Google Maps</a>
    <button class="btn" id="share" type="button">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
  </div>

  <section class="section">
    <h3>–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã</h3>
    <ul id="facts"></ul>
  </section>

  <section class="section quiz">
    <h3>–ü—Ä–æ–≤–µ—Ä—å –∑–Ω–∞–Ω–∏—è</h3>
    <div id="quiz"></div>
    <div class="actions"><button class="btn" id="check" type="button">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button></div>
  </section>

  <section class="recon" aria-label="–ü—Ä–æ—à–ª–æ–µ / —Å–µ–≥–æ–¥–Ω—è">
    <div class="recon-head">
      <h3 style="margin:0">–ü—Ä–æ—à–ª–æ–µ / —Å–µ–≥–æ–¥–Ω—è</h3>
      <small class="muted">–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –ø–æ–ª–∑—É–Ω–æ–∫</small>
    </div>
    <div class="recon-wrap">
      <img class="recon-img" alt="–°–µ–≥–æ–¥–Ω—è">
      <div class="recon-overlay"><img id="recon-then" alt="–ü—Ä–æ—à–ª–æ–µ"></div>
      <input id="recon-slider" class="recon-slider" type="range" min="0" max="100" value="50"/>
    </div>
  </section>
</main>

<footer><div class="container">¬© <span id="y"></span> Turkestan Guide</div></footer>

<!-- 1) –î–ê–ù–ù–´–ï –ú–ï–°–¢–ê ‚Äî —Å–Ω–∞—á–∞–ª–∞ -->
<script>
window.PLACE = {
  id:'yasawi',
  name:'–ú–∞–≤–∑–æ–ª–µ–π –•–æ–¥–∂–∏ –ê—Ö–º–µ–¥–∞ –Ø—Å—Å–∞—É–∏',
  loc:'–≥. –¢—É—Ä–∫–µ—Å—Ç–∞–Ω',
  category:'–ú–∞–≤–∑–æ–ª–µ–π',
  img:'../img/0_c280d24e5f3d7fa18e923992968ec42fe96ddde1e7abee1c0daa6b9e6b99320c.png.webp',
  lead:'–ì—Ä–∞–Ω–¥–∏–æ–∑–Ω—ã–π –ø–∞–º—è—Ç–Ω–∏–∫ XIV –≤–µ–∫–∞ —Å –∫—Ä—É–ø–Ω–µ–π—à–∏–º –∫—É–ø–æ–ª–æ–º –≤ —Ä–µ–≥–∏–æ–Ω–µ –∏ –¢–∞–π–∫–∞–∑–∞–Ω–æ–º.',
  facts:[
    '–í–æ–∑–≤–µ–¥—ë–Ω –ø–æ –ø—Ä–∏–∫–∞–∑—É –ê–º–∏—Ä–∞ –¢–∏–º—É—Ä–∞ –≤ –∫–æ–Ω—Ü–µ XIV –≤–µ–∫–∞.',
    '–ö—Ä—É–ø–Ω—ã–π —Å–∏–Ω–µ-–≥–æ–ª—É–±–æ–π –∫—É–ø–æ–ª –∏ –º–∞–π–æ–ª–∏–∫–æ–≤—ã–µ —É–∑–æ—Ä—ã ‚Äî –≤–∏–∑–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞.',
    '–í–Ω—É—Ç—Ä–∏ ‚Äî –º–µ—á–µ—Ç—å, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∂–∞–º–∞–∞—Ç—Ö–∞–Ω–∞ –∏ —É—Å—ã–ø–∞–ª—å–Ω–∏—Ü–∞; —Ö—Ä–∞–Ω–∏—Ç—Å—è –±—Ä–æ–Ω–∑–æ–≤—ã–π –¢–∞–π–∫–∞–∑–∞–Ω.'
  ],
  questions:[
    {q:'–ü–æ —á—å–µ–º—É –ø—Ä–∏–∫–∞–∑—É –≤–æ–∑–≤–æ–¥–∏–ª–∏ –º–∞–≤–∑–æ–ª–µ–π?', a:['–ê–º–∏—Ä–∞ –¢–∏–º—É—Ä–∞','–ê–±—ã–ª–∞–π —Ö–∞–Ω–∞','–ö–∞–±–∞–Ω–∞-–±–∞—Ç—ã—Ä–∞'], ok:0},
    {q:'–ò–∑ –∫–∞–∫–æ–≥–æ –º–µ—Ç–∞–ª–ª–∞ –¢–∞–π–∫–∞–∑–∞–Ω?', a:['–ë—Ä–æ–Ω–∑–∞','–ñ–µ–ª–µ–∑–æ','–ú–µ–¥—å'], ok:0}
  ],
  // –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–µ—Å–ª–∏ –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤ ‚Äî –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π)
  recon:{ now:'../img/yasawi-now.jpg', then:'../img/yasawi-then.jpg' }
};
</script>

<!-- 2) –†–ï–ù–î–ï–† –í DOM (–æ–±—â–∏–π) -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const P = window.PLACE || {};
  const $ = (s,root=document)=>root.querySelector(s);
  const Y = $('#y'); Y && (Y.textContent = new Date().getFullYear());
  const title=$('#title'), loc=$('#loc'), lead=$('#lead'), facts=$('#facts'), quiz=$('#quiz'), mapA=$('#map');

  const cover = $('.place-hero');
  if (cover){ const src=P.img||('../img/'+(P.id||'placeholder')+'.webp'); cover.src=src; cover.alt=P.name||''; cover.onerror=()=>{cover.style.display='none'}; }
  if (title) title.textContent=P.name||'–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
  if (loc)   loc.textContent=P.loc||'';
  if (lead)  lead.textContent=P.lead||'';
  if (facts && Array.isArray(P.facts)) facts.innerHTML=P.facts.map(t=>`<li>‚úÖ ${esc(t)}</li>`).join('');
  if (quiz && Array.isArray(P.questions)){
    quiz.innerHTML=P.questions.map((q,i)=>`
      <div class="q" data-i="${i}">
        <h4 style="margin:0 0 6px">${esc(q.q)}</h4>
        ${q.a.map((opt,idx)=>`<label style="display:block;margin:6px 0"><input type="radio" name="q${i}" value="${idx}"> ${esc(opt)}</label>`).join('')}
        <div class="muted res" style="margin-top:6px"></div>
      </div>`).join('');
    const checkBtn=document.getElementById('check');
    checkBtn && checkBtn.addEventListener('click',()=>{ quiz.querySelectorAll('.q').forEach(box=>{ const i=+box.dataset.i, ok=(P.questions[i].ok|0); const picked=box.querySelector('input[type=radio]:checked'); const res=box.querySelector('.res'); if(!picked){res.textContent='–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç';return;} res.textContent=(+picked.value===ok)?'–í–µ—Ä–Ω–æ! üéâ':'–ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë.'; }); });
  }
  if (mapA) mapA.href=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent((P.name||'')+' '+(P.loc||''))}`;
  const reconWrap=document.querySelector('.recon');
  if(!(P.recon && P.recon.now && P.recon.then)){ reconWrap && (reconWrap.style.display='none'); }
  else{
    const nowImg=$('.recon-img',reconWrap), thenImg=document.getElementById('recon-then')||$('.recon-overlay img',reconWrap), slider=document.getElementById('recon-slider')||$('.recon-slider',reconWrap);
    nowImg && (nowImg.src=P.recon.now); thenImg && (thenImg.src=P.recon.then);
    if(slider && thenImg){ slider.addEventListener('input',()=>{ const right=100-parseInt(slider.value,10); thenImg.style.clipPath=`inset(0 ${right}% 0 0)`; }); }
  }
  const shareBtn=document.getElementById('share');
  shareBtn && shareBtn.addEventListener('click', async ()=>{ const url=location.href, text=`${P.name} ‚Äî ${P.loc}`; try{ if(navigator.share){await navigator.share({title:P.name,text,url})} else {await navigator.clipboard.writeText(url); toast('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');} }catch(_){} });
  function esc(s){return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]))}
  function toast(msg){ const t=document.createElement('div'); t.textContent=msg; t.style.cssText='position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:rgba(14,165,233,.95);color:#05201a;padding:10px 14px;border-radius:12px;font:600 14px system-ui;–∑-index:9999;box-shadow:0 10px 30px rgba(0,0,0,.25)'; document.body.appendChild(t); setTimeout(()=>{t.style.transition="opacity .3s"; t.style.opacity='0';},1400); setTimeout(()=>t.remove(),1800); }
});
</script>

<!-- 3) ¬´–ë—ã–ª –∑–¥–µ—Å—å¬ª -->
<script src="../js/place-page.js" defer></script>
</body>
</html>
